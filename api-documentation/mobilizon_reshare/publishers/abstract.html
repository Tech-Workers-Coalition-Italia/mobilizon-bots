<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>mobilizon_reshare.publishers.abstract API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>mobilizon_reshare.publishers.abstract</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">import inspect
import logging
from abc import ABC, abstractmethod
from dataclasses import dataclass
from typing import List, Optional
from uuid import UUID

from dynaconf.utils.boxing import DynaBox
from jinja2 import Environment, FileSystemLoader, Template

from mobilizon_reshare.config.config import get_settings
from mobilizon_reshare.event.event import MobilizonEvent
from mobilizon_reshare.models.publication import Publication as PublicationModel
from .exceptions import InvalidAttribute

JINJA_ENV = Environment(loader=FileSystemLoader(&#34;/&#34;))

logger = logging.getLogger(__name__)


class LoggerMixin:
    def _log_debug(self, msg, *args, **kwargs):
        self.__log(logging.DEBUG, msg, *args, **kwargs)

    def _log_info(self, msg, *args, **kwargs):
        self.__log(logging.INFO, msg, *args, **kwargs)

    def _log_warning(self, msg, *args, **kwargs):
        self.__log(logging.WARNING, msg, *args, **kwargs)

    def _log_error(self, msg, *args, **kwargs):
        self.__log(logging.ERROR, msg, *args, **kwargs)

    def _log_critical(self, msg, *args, **kwargs):
        self.__log(logging.CRITICAL, msg, *args, **kwargs)

    def __log(self, level, msg, raise_error: type = None, *args, **kwargs):
        method = inspect.currentframe().f_back.f_back.f_code.co_name
        logger.log(level, f&#34;{self}.{method}(): {msg}&#34;, *args, **kwargs)
        if raise_error is not None:
            raise raise_error(msg)


class ConfLoaderMixin:
    _conf = tuple()

    @property
    def conf(self) -&gt; DynaBox:
        &#34;&#34;&#34;
        Retrieves class&#39;s settings.
        &#34;&#34;&#34;
        cls = type(self)

        try:
            t, n = cls._conf or tuple()
            return get_settings()[t][n]
        except (KeyError, ValueError):
            raise InvalidAttribute(
                f&#34;Class {cls.__name__} has invalid ``_conf`` attribute&#34;
                f&#34; (should be 2-tuple)&#34;
            )


class AbstractPlatform(ABC, LoggerMixin, ConfLoaderMixin):
    &#34;&#34;&#34;
    Generic notifier class.
    Shall be inherited from specific subclasses that will manage validation
    process for messages and credentials, text formatting, posting, etc.

    Attributes:
        - ``message``: a formatted ``str``
    &#34;&#34;&#34;

    # Non-abstract subclasses should define ``_conf`` as a 2-tuple, where the
    # first element is the type of class (either &#39;notifier&#39; or &#39;publisher&#39;) and
    # the second the name of its service (ie: &#39;facebook&#39;, &#39;telegram&#39;)

    def __repr__(self):
        return self.name

    @property
    @abstractmethod
    def name(self):
        pass

    @abstractmethod
    def _send(self, message: str, event: Optional[MobilizonEvent] = None):
        raise NotImplementedError  # pragma: no cover

    def send(self, message: str, event: Optional[MobilizonEvent] = None):
        &#34;&#34;&#34;
        Sends a message to the target channel
        &#34;&#34;&#34;
        response = self._send(message, event)
        self._validate_response(response)

    @abstractmethod
    def _validate_response(self, response):
        raise NotImplementedError  # pragma: no cover

    @abstractmethod
    def validate_credentials(self) -&gt; None:
        &#34;&#34;&#34;
        Validates credentials.
        Should raise ``PublisherError`` (or one of its subclasses) if
        credentials are not valid.
        &#34;&#34;&#34;
        raise NotImplementedError  # pragma: no cover


class AbstractEventFormatter(LoggerMixin, ConfLoaderMixin):
    @abstractmethod
    def _validate_event(self, event: MobilizonEvent) -&gt; None:
        &#34;&#34;&#34;
        Validates publisher&#39;s event.
        Should raise ``PublisherError`` (or one of its subclasses) if event
        is not valid.
        &#34;&#34;&#34;
        raise NotImplementedError  # pragma: no cover

    @abstractmethod
    def _validate_message(self, message: str) -&gt; None:
        &#34;&#34;&#34;
        Validates notifier&#39;s message.
        Should raise ``PublisherError`` (or one of its subclasses) if message
        is not valid.
        &#34;&#34;&#34;
        raise NotImplementedError  # pragma: no cover

    def validate_event(self, event: MobilizonEvent) -&gt; None:
        self._validate_event(event)
        self._validate_message(self.get_message_from_event(event))

    def _preprocess_event(self, event):
        &#34;&#34;&#34;
        Allows publishers to preprocess events before feeding them to the template
        &#34;&#34;&#34;
        return event

    def get_message_from_event(self, event: MobilizonEvent) -&gt; str:
        &#34;&#34;&#34;
        Retrieves a message from the event itself.
        &#34;&#34;&#34;
        event = self._preprocess_event(event)
        message = event.format(self.get_message_template())
        message = self._preprocess_message(message)
        return message

    def get_message_template(self) -&gt; Template:
        &#34;&#34;&#34;
        Retrieves publisher&#39;s message template.
        &#34;&#34;&#34;
        template_path = self.conf.msg_template_path or self.default_template_path
        return JINJA_ENV.get_template(template_path)

    def get_recap_header(self):
        template_path = (
            self.conf.recap_header_template_path
            or self.default_recap_header_template_path
        )
        return JINJA_ENV.get_template(template_path).render()

    def get_recap_fragment_template(self) -&gt; Template:
        template_path = (
            self.conf.recap_template_path or self.default_recap_template_path
        )
        return JINJA_ENV.get_template(template_path)

    def get_recap_fragment(self, event: MobilizonEvent) -&gt; str:
        &#34;&#34;&#34;
        Retrieves the fragment that describes a single event inside the event recap.
        &#34;&#34;&#34;
        event = self._preprocess_event(event)
        return event.format(self.get_recap_fragment_template())

    def _preprocess_message(self, message: str):
        return message


@dataclass
class BasePublication:
    publisher: AbstractPlatform
    formatter: AbstractEventFormatter


@dataclass
class EventPublication(BasePublication):
    event: MobilizonEvent
    id: UUID

    @classmethod
    def from_orm(cls, model: PublicationModel, event: MobilizonEvent):
        # imported here to avoid circular dependencies
        from mobilizon_reshare.publishers.platforms.platform_mapping import (
            get_publisher_class,
            get_formatter_class,
        )

        publisher = get_publisher_class(model.publisher.name)()
        formatter = get_formatter_class(model.publisher.name)()
        return cls(publisher, formatter, event, model.id,)


@dataclass
class RecapPublication(BasePublication):
    events: List[MobilizonEvent]</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="mobilizon_reshare.publishers.abstract.AbstractEventFormatter"><code class="flex name class">
<span>class <span class="ident">AbstractEventFormatter</span></span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class AbstractEventFormatter(LoggerMixin, ConfLoaderMixin):
    @abstractmethod
    def _validate_event(self, event: MobilizonEvent) -&gt; None:
        &#34;&#34;&#34;
        Validates publisher&#39;s event.
        Should raise ``PublisherError`` (or one of its subclasses) if event
        is not valid.
        &#34;&#34;&#34;
        raise NotImplementedError  # pragma: no cover

    @abstractmethod
    def _validate_message(self, message: str) -&gt; None:
        &#34;&#34;&#34;
        Validates notifier&#39;s message.
        Should raise ``PublisherError`` (or one of its subclasses) if message
        is not valid.
        &#34;&#34;&#34;
        raise NotImplementedError  # pragma: no cover

    def validate_event(self, event: MobilizonEvent) -&gt; None:
        self._validate_event(event)
        self._validate_message(self.get_message_from_event(event))

    def _preprocess_event(self, event):
        &#34;&#34;&#34;
        Allows publishers to preprocess events before feeding them to the template
        &#34;&#34;&#34;
        return event

    def get_message_from_event(self, event: MobilizonEvent) -&gt; str:
        &#34;&#34;&#34;
        Retrieves a message from the event itself.
        &#34;&#34;&#34;
        event = self._preprocess_event(event)
        message = event.format(self.get_message_template())
        message = self._preprocess_message(message)
        return message

    def get_message_template(self) -&gt; Template:
        &#34;&#34;&#34;
        Retrieves publisher&#39;s message template.
        &#34;&#34;&#34;
        template_path = self.conf.msg_template_path or self.default_template_path
        return JINJA_ENV.get_template(template_path)

    def get_recap_header(self):
        template_path = (
            self.conf.recap_header_template_path
            or self.default_recap_header_template_path
        )
        return JINJA_ENV.get_template(template_path).render()

    def get_recap_fragment_template(self) -&gt; Template:
        template_path = (
            self.conf.recap_template_path or self.default_recap_template_path
        )
        return JINJA_ENV.get_template(template_path)

    def get_recap_fragment(self, event: MobilizonEvent) -&gt; str:
        &#34;&#34;&#34;
        Retrieves the fragment that describes a single event inside the event recap.
        &#34;&#34;&#34;
        event = self._preprocess_event(event)
        return event.format(self.get_recap_fragment_template())

    def _preprocess_message(self, message: str):
        return message</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="mobilizon_reshare.publishers.abstract.LoggerMixin" href="#mobilizon_reshare.publishers.abstract.LoggerMixin">LoggerMixin</a></li>
<li><a title="mobilizon_reshare.publishers.abstract.ConfLoaderMixin" href="#mobilizon_reshare.publishers.abstract.ConfLoaderMixin">ConfLoaderMixin</a></li>
</ul>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="mobilizon_reshare.publishers.platforms.facebook.FacebookFormatter" href="platforms/facebook.html#mobilizon_reshare.publishers.platforms.facebook.FacebookFormatter">FacebookFormatter</a></li>
<li><a title="mobilizon_reshare.publishers.platforms.mastodon.MastodonFormatter" href="platforms/mastodon.html#mobilizon_reshare.publishers.platforms.mastodon.MastodonFormatter">MastodonFormatter</a></li>
<li><a title="mobilizon_reshare.publishers.platforms.telegram.TelegramFormatter" href="platforms/telegram.html#mobilizon_reshare.publishers.platforms.telegram.TelegramFormatter">TelegramFormatter</a></li>
<li><a title="mobilizon_reshare.publishers.platforms.twitter.TwitterFormatter" href="platforms/twitter.html#mobilizon_reshare.publishers.platforms.twitter.TwitterFormatter">TwitterFormatter</a></li>
<li><a title="mobilizon_reshare.publishers.platforms.zulip.ZulipFormatter" href="platforms/zulip.html#mobilizon_reshare.publishers.platforms.zulip.ZulipFormatter">ZulipFormatter</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="mobilizon_reshare.publishers.abstract.AbstractEventFormatter.get_message_from_event"><code class="name flex">
<span>def <span class="ident">get_message_from_event</span></span>(<span>self, event: <a title="mobilizon_reshare.event.event.MobilizonEvent" href="../event/event.html#mobilizon_reshare.event.event.MobilizonEvent">MobilizonEvent</a>) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Retrieves a message from the event itself.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_message_from_event(self, event: MobilizonEvent) -&gt; str:
    &#34;&#34;&#34;
    Retrieves a message from the event itself.
    &#34;&#34;&#34;
    event = self._preprocess_event(event)
    message = event.format(self.get_message_template())
    message = self._preprocess_message(message)
    return message</code></pre>
</details>
</dd>
<dt id="mobilizon_reshare.publishers.abstract.AbstractEventFormatter.get_message_template"><code class="name flex">
<span>def <span class="ident">get_message_template</span></span>(<span>self) ‑> jinja2.environment.Template</span>
</code></dt>
<dd>
<div class="desc"><p>Retrieves publisher's message template.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_message_template(self) -&gt; Template:
    &#34;&#34;&#34;
    Retrieves publisher&#39;s message template.
    &#34;&#34;&#34;
    template_path = self.conf.msg_template_path or self.default_template_path
    return JINJA_ENV.get_template(template_path)</code></pre>
</details>
</dd>
<dt id="mobilizon_reshare.publishers.abstract.AbstractEventFormatter.get_recap_fragment"><code class="name flex">
<span>def <span class="ident">get_recap_fragment</span></span>(<span>self, event: <a title="mobilizon_reshare.event.event.MobilizonEvent" href="../event/event.html#mobilizon_reshare.event.event.MobilizonEvent">MobilizonEvent</a>) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Retrieves the fragment that describes a single event inside the event recap.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_recap_fragment(self, event: MobilizonEvent) -&gt; str:
    &#34;&#34;&#34;
    Retrieves the fragment that describes a single event inside the event recap.
    &#34;&#34;&#34;
    event = self._preprocess_event(event)
    return event.format(self.get_recap_fragment_template())</code></pre>
</details>
</dd>
<dt id="mobilizon_reshare.publishers.abstract.AbstractEventFormatter.get_recap_fragment_template"><code class="name flex">
<span>def <span class="ident">get_recap_fragment_template</span></span>(<span>self) ‑> jinja2.environment.Template</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_recap_fragment_template(self) -&gt; Template:
    template_path = (
        self.conf.recap_template_path or self.default_recap_template_path
    )
    return JINJA_ENV.get_template(template_path)</code></pre>
</details>
</dd>
<dt id="mobilizon_reshare.publishers.abstract.AbstractEventFormatter.get_recap_header"><code class="name flex">
<span>def <span class="ident">get_recap_header</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_recap_header(self):
    template_path = (
        self.conf.recap_header_template_path
        or self.default_recap_header_template_path
    )
    return JINJA_ENV.get_template(template_path).render()</code></pre>
</details>
</dd>
<dt id="mobilizon_reshare.publishers.abstract.AbstractEventFormatter.validate_event"><code class="name flex">
<span>def <span class="ident">validate_event</span></span>(<span>self, event: <a title="mobilizon_reshare.event.event.MobilizonEvent" href="../event/event.html#mobilizon_reshare.event.event.MobilizonEvent">MobilizonEvent</a>) ‑> None</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def validate_event(self, event: MobilizonEvent) -&gt; None:
    self._validate_event(event)
    self._validate_message(self.get_message_from_event(event))</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="mobilizon_reshare.publishers.abstract.ConfLoaderMixin" href="#mobilizon_reshare.publishers.abstract.ConfLoaderMixin">ConfLoaderMixin</a></b></code>:
<ul class="hlist">
<li><code><a title="mobilizon_reshare.publishers.abstract.ConfLoaderMixin.conf" href="#mobilizon_reshare.publishers.abstract.ConfLoaderMixin.conf">conf</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="mobilizon_reshare.publishers.abstract.AbstractPlatform"><code class="flex name class">
<span>class <span class="ident">AbstractPlatform</span></span>
</code></dt>
<dd>
<div class="desc"><p>Generic notifier class.
Shall be inherited from specific subclasses that will manage validation
process for messages and credentials, text formatting, posting, etc.</p>
<h2 id="attributes">Attributes</h2>
<ul>
<li><code>message</code>: a formatted <code>str</code></li>
</ul></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class AbstractPlatform(ABC, LoggerMixin, ConfLoaderMixin):
    &#34;&#34;&#34;
    Generic notifier class.
    Shall be inherited from specific subclasses that will manage validation
    process for messages and credentials, text formatting, posting, etc.

    Attributes:
        - ``message``: a formatted ``str``
    &#34;&#34;&#34;

    # Non-abstract subclasses should define ``_conf`` as a 2-tuple, where the
    # first element is the type of class (either &#39;notifier&#39; or &#39;publisher&#39;) and
    # the second the name of its service (ie: &#39;facebook&#39;, &#39;telegram&#39;)

    def __repr__(self):
        return self.name

    @property
    @abstractmethod
    def name(self):
        pass

    @abstractmethod
    def _send(self, message: str, event: Optional[MobilizonEvent] = None):
        raise NotImplementedError  # pragma: no cover

    def send(self, message: str, event: Optional[MobilizonEvent] = None):
        &#34;&#34;&#34;
        Sends a message to the target channel
        &#34;&#34;&#34;
        response = self._send(message, event)
        self._validate_response(response)

    @abstractmethod
    def _validate_response(self, response):
        raise NotImplementedError  # pragma: no cover

    @abstractmethod
    def validate_credentials(self) -&gt; None:
        &#34;&#34;&#34;
        Validates credentials.
        Should raise ``PublisherError`` (or one of its subclasses) if
        credentials are not valid.
        &#34;&#34;&#34;
        raise NotImplementedError  # pragma: no cover</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>abc.ABC</li>
<li><a title="mobilizon_reshare.publishers.abstract.LoggerMixin" href="#mobilizon_reshare.publishers.abstract.LoggerMixin">LoggerMixin</a></li>
<li><a title="mobilizon_reshare.publishers.abstract.ConfLoaderMixin" href="#mobilizon_reshare.publishers.abstract.ConfLoaderMixin">ConfLoaderMixin</a></li>
</ul>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="mobilizon_reshare.publishers.platforms.facebook.FacebookPlatform" href="platforms/facebook.html#mobilizon_reshare.publishers.platforms.facebook.FacebookPlatform">FacebookPlatform</a></li>
<li><a title="mobilizon_reshare.publishers.platforms.mastodon.MastodonPlatform" href="platforms/mastodon.html#mobilizon_reshare.publishers.platforms.mastodon.MastodonPlatform">MastodonPlatform</a></li>
<li><a title="mobilizon_reshare.publishers.platforms.telegram.TelegramPlatform" href="platforms/telegram.html#mobilizon_reshare.publishers.platforms.telegram.TelegramPlatform">TelegramPlatform</a></li>
<li><a title="mobilizon_reshare.publishers.platforms.twitter.TwitterPlatform" href="platforms/twitter.html#mobilizon_reshare.publishers.platforms.twitter.TwitterPlatform">TwitterPlatform</a></li>
<li><a title="mobilizon_reshare.publishers.platforms.zulip.ZulipPlatform" href="platforms/zulip.html#mobilizon_reshare.publishers.platforms.zulip.ZulipPlatform">ZulipPlatform</a></li>
</ul>
<h3>Instance variables</h3>
<dl>
<dt id="mobilizon_reshare.publishers.abstract.AbstractPlatform.name"><code class="name">var <span class="ident">name</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
@abstractmethod
def name(self):
    pass</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="mobilizon_reshare.publishers.abstract.AbstractPlatform.send"><code class="name flex">
<span>def <span class="ident">send</span></span>(<span>self, message: str, event: Optional[<a title="mobilizon_reshare.event.event.MobilizonEvent" href="../event/event.html#mobilizon_reshare.event.event.MobilizonEvent">MobilizonEvent</a>] = None)</span>
</code></dt>
<dd>
<div class="desc"><p>Sends a message to the target channel</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def send(self, message: str, event: Optional[MobilizonEvent] = None):
    &#34;&#34;&#34;
    Sends a message to the target channel
    &#34;&#34;&#34;
    response = self._send(message, event)
    self._validate_response(response)</code></pre>
</details>
</dd>
<dt id="mobilizon_reshare.publishers.abstract.AbstractPlatform.validate_credentials"><code class="name flex">
<span>def <span class="ident">validate_credentials</span></span>(<span>self) ‑> None</span>
</code></dt>
<dd>
<div class="desc"><p>Validates credentials.
Should raise <code>PublisherError</code> (or one of its subclasses) if
credentials are not valid.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@abstractmethod
def validate_credentials(self) -&gt; None:
    &#34;&#34;&#34;
    Validates credentials.
    Should raise ``PublisherError`` (or one of its subclasses) if
    credentials are not valid.
    &#34;&#34;&#34;
    raise NotImplementedError  # pragma: no cover</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="mobilizon_reshare.publishers.abstract.ConfLoaderMixin" href="#mobilizon_reshare.publishers.abstract.ConfLoaderMixin">ConfLoaderMixin</a></b></code>:
<ul class="hlist">
<li><code><a title="mobilizon_reshare.publishers.abstract.ConfLoaderMixin.conf" href="#mobilizon_reshare.publishers.abstract.ConfLoaderMixin.conf">conf</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="mobilizon_reshare.publishers.abstract.BasePublication"><code class="flex name class">
<span>class <span class="ident">BasePublication</span></span>
<span>(</span><span>publisher: <a title="mobilizon_reshare.publishers.abstract.AbstractPlatform" href="#mobilizon_reshare.publishers.abstract.AbstractPlatform">AbstractPlatform</a>, formatter: <a title="mobilizon_reshare.publishers.abstract.AbstractEventFormatter" href="#mobilizon_reshare.publishers.abstract.AbstractEventFormatter">AbstractEventFormatter</a>)</span>
</code></dt>
<dd>
<div class="desc"><p>BasePublication(publisher: mobilizon_reshare.publishers.abstract.AbstractPlatform, formatter: mobilizon_reshare.publishers.abstract.AbstractEventFormatter)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@dataclass
class BasePublication:
    publisher: AbstractPlatform
    formatter: AbstractEventFormatter</code></pre>
</details>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="mobilizon_reshare.publishers.abstract.EventPublication" href="#mobilizon_reshare.publishers.abstract.EventPublication">EventPublication</a></li>
<li><a title="mobilizon_reshare.publishers.abstract.RecapPublication" href="#mobilizon_reshare.publishers.abstract.RecapPublication">RecapPublication</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="mobilizon_reshare.publishers.abstract.BasePublication.formatter"><code class="name">var <span class="ident">formatter</span> : <a title="mobilizon_reshare.publishers.abstract.AbstractEventFormatter" href="#mobilizon_reshare.publishers.abstract.AbstractEventFormatter">AbstractEventFormatter</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mobilizon_reshare.publishers.abstract.BasePublication.publisher"><code class="name">var <span class="ident">publisher</span> : <a title="mobilizon_reshare.publishers.abstract.AbstractPlatform" href="#mobilizon_reshare.publishers.abstract.AbstractPlatform">AbstractPlatform</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
<dt id="mobilizon_reshare.publishers.abstract.ConfLoaderMixin"><code class="flex name class">
<span>class <span class="ident">ConfLoaderMixin</span></span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ConfLoaderMixin:
    _conf = tuple()

    @property
    def conf(self) -&gt; DynaBox:
        &#34;&#34;&#34;
        Retrieves class&#39;s settings.
        &#34;&#34;&#34;
        cls = type(self)

        try:
            t, n = cls._conf or tuple()
            return get_settings()[t][n]
        except (KeyError, ValueError):
            raise InvalidAttribute(
                f&#34;Class {cls.__name__} has invalid ``_conf`` attribute&#34;
                f&#34; (should be 2-tuple)&#34;
            )</code></pre>
</details>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="mobilizon_reshare.publishers.abstract.AbstractEventFormatter" href="#mobilizon_reshare.publishers.abstract.AbstractEventFormatter">AbstractEventFormatter</a></li>
<li><a title="mobilizon_reshare.publishers.abstract.AbstractPlatform" href="#mobilizon_reshare.publishers.abstract.AbstractPlatform">AbstractPlatform</a></li>
</ul>
<h3>Instance variables</h3>
<dl>
<dt id="mobilizon_reshare.publishers.abstract.ConfLoaderMixin.conf"><code class="name">var <span class="ident">conf</span> : dynaconf.utils.boxing.DynaBox</code></dt>
<dd>
<div class="desc"><p>Retrieves class's settings.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def conf(self) -&gt; DynaBox:
    &#34;&#34;&#34;
    Retrieves class&#39;s settings.
    &#34;&#34;&#34;
    cls = type(self)

    try:
        t, n = cls._conf or tuple()
        return get_settings()[t][n]
    except (KeyError, ValueError):
        raise InvalidAttribute(
            f&#34;Class {cls.__name__} has invalid ``_conf`` attribute&#34;
            f&#34; (should be 2-tuple)&#34;
        )</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="mobilizon_reshare.publishers.abstract.EventPublication"><code class="flex name class">
<span>class <span class="ident">EventPublication</span></span>
<span>(</span><span>publisher: <a title="mobilizon_reshare.publishers.abstract.AbstractPlatform" href="#mobilizon_reshare.publishers.abstract.AbstractPlatform">AbstractPlatform</a>, formatter: <a title="mobilizon_reshare.publishers.abstract.AbstractEventFormatter" href="#mobilizon_reshare.publishers.abstract.AbstractEventFormatter">AbstractEventFormatter</a>, event: <a title="mobilizon_reshare.event.event.MobilizonEvent" href="../event/event.html#mobilizon_reshare.event.event.MobilizonEvent">MobilizonEvent</a>, id: uuid.UUID)</span>
</code></dt>
<dd>
<div class="desc"><p>EventPublication(publisher: mobilizon_reshare.publishers.abstract.AbstractPlatform, formatter: mobilizon_reshare.publishers.abstract.AbstractEventFormatter, event: mobilizon_reshare.event.event.MobilizonEvent, id: uuid.UUID)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@dataclass
class EventPublication(BasePublication):
    event: MobilizonEvent
    id: UUID

    @classmethod
    def from_orm(cls, model: PublicationModel, event: MobilizonEvent):
        # imported here to avoid circular dependencies
        from mobilizon_reshare.publishers.platforms.platform_mapping import (
            get_publisher_class,
            get_formatter_class,
        )

        publisher = get_publisher_class(model.publisher.name)()
        formatter = get_formatter_class(model.publisher.name)()
        return cls(publisher, formatter, event, model.id,)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="mobilizon_reshare.publishers.abstract.BasePublication" href="#mobilizon_reshare.publishers.abstract.BasePublication">BasePublication</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="mobilizon_reshare.publishers.abstract.EventPublication.event"><code class="name">var <span class="ident">event</span> : <a title="mobilizon_reshare.event.event.MobilizonEvent" href="../event/event.html#mobilizon_reshare.event.event.MobilizonEvent">MobilizonEvent</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="mobilizon_reshare.publishers.abstract.EventPublication.id"><code class="name">var <span class="ident">id</span> : uuid.UUID</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Static methods</h3>
<dl>
<dt id="mobilizon_reshare.publishers.abstract.EventPublication.from_orm"><code class="name flex">
<span>def <span class="ident">from_orm</span></span>(<span>model: <a title="mobilizon_reshare.models.publication.Publication" href="../models/publication.html#mobilizon_reshare.models.publication.Publication">Publication</a>, event: <a title="mobilizon_reshare.event.event.MobilizonEvent" href="../event/event.html#mobilizon_reshare.event.event.MobilizonEvent">MobilizonEvent</a>)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@classmethod
def from_orm(cls, model: PublicationModel, event: MobilizonEvent):
    # imported here to avoid circular dependencies
    from mobilizon_reshare.publishers.platforms.platform_mapping import (
        get_publisher_class,
        get_formatter_class,
    )

    publisher = get_publisher_class(model.publisher.name)()
    formatter = get_formatter_class(model.publisher.name)()
    return cls(publisher, formatter, event, model.id,)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="mobilizon_reshare.publishers.abstract.LoggerMixin"><code class="flex name class">
<span>class <span class="ident">LoggerMixin</span></span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class LoggerMixin:
    def _log_debug(self, msg, *args, **kwargs):
        self.__log(logging.DEBUG, msg, *args, **kwargs)

    def _log_info(self, msg, *args, **kwargs):
        self.__log(logging.INFO, msg, *args, **kwargs)

    def _log_warning(self, msg, *args, **kwargs):
        self.__log(logging.WARNING, msg, *args, **kwargs)

    def _log_error(self, msg, *args, **kwargs):
        self.__log(logging.ERROR, msg, *args, **kwargs)

    def _log_critical(self, msg, *args, **kwargs):
        self.__log(logging.CRITICAL, msg, *args, **kwargs)

    def __log(self, level, msg, raise_error: type = None, *args, **kwargs):
        method = inspect.currentframe().f_back.f_back.f_code.co_name
        logger.log(level, f&#34;{self}.{method}(): {msg}&#34;, *args, **kwargs)
        if raise_error is not None:
            raise raise_error(msg)</code></pre>
</details>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="mobilizon_reshare.publishers.abstract.AbstractEventFormatter" href="#mobilizon_reshare.publishers.abstract.AbstractEventFormatter">AbstractEventFormatter</a></li>
<li><a title="mobilizon_reshare.publishers.abstract.AbstractPlatform" href="#mobilizon_reshare.publishers.abstract.AbstractPlatform">AbstractPlatform</a></li>
</ul>
</dd>
<dt id="mobilizon_reshare.publishers.abstract.RecapPublication"><code class="flex name class">
<span>class <span class="ident">RecapPublication</span></span>
<span>(</span><span>publisher: <a title="mobilizon_reshare.publishers.abstract.AbstractPlatform" href="#mobilizon_reshare.publishers.abstract.AbstractPlatform">AbstractPlatform</a>, formatter: <a title="mobilizon_reshare.publishers.abstract.AbstractEventFormatter" href="#mobilizon_reshare.publishers.abstract.AbstractEventFormatter">AbstractEventFormatter</a>, events: List[<a title="mobilizon_reshare.event.event.MobilizonEvent" href="../event/event.html#mobilizon_reshare.event.event.MobilizonEvent">MobilizonEvent</a>])</span>
</code></dt>
<dd>
<div class="desc"><p>RecapPublication(publisher: mobilizon_reshare.publishers.abstract.AbstractPlatform, formatter: mobilizon_reshare.publishers.abstract.AbstractEventFormatter, events: List[mobilizon_reshare.event.event.MobilizonEvent])</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@dataclass
class RecapPublication(BasePublication):
    events: List[MobilizonEvent]</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="mobilizon_reshare.publishers.abstract.BasePublication" href="#mobilizon_reshare.publishers.abstract.BasePublication">BasePublication</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="mobilizon_reshare.publishers.abstract.RecapPublication.events"><code class="name">var <span class="ident">events</span> : List[<a title="mobilizon_reshare.event.event.MobilizonEvent" href="../event/event.html#mobilizon_reshare.event.event.MobilizonEvent">MobilizonEvent</a>]</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="mobilizon_reshare.publishers" href="index.html">mobilizon_reshare.publishers</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="mobilizon_reshare.publishers.abstract.AbstractEventFormatter" href="#mobilizon_reshare.publishers.abstract.AbstractEventFormatter">AbstractEventFormatter</a></code></h4>
<ul class="">
<li><code><a title="mobilizon_reshare.publishers.abstract.AbstractEventFormatter.get_message_from_event" href="#mobilizon_reshare.publishers.abstract.AbstractEventFormatter.get_message_from_event">get_message_from_event</a></code></li>
<li><code><a title="mobilizon_reshare.publishers.abstract.AbstractEventFormatter.get_message_template" href="#mobilizon_reshare.publishers.abstract.AbstractEventFormatter.get_message_template">get_message_template</a></code></li>
<li><code><a title="mobilizon_reshare.publishers.abstract.AbstractEventFormatter.get_recap_fragment" href="#mobilizon_reshare.publishers.abstract.AbstractEventFormatter.get_recap_fragment">get_recap_fragment</a></code></li>
<li><code><a title="mobilizon_reshare.publishers.abstract.AbstractEventFormatter.get_recap_fragment_template" href="#mobilizon_reshare.publishers.abstract.AbstractEventFormatter.get_recap_fragment_template">get_recap_fragment_template</a></code></li>
<li><code><a title="mobilizon_reshare.publishers.abstract.AbstractEventFormatter.get_recap_header" href="#mobilizon_reshare.publishers.abstract.AbstractEventFormatter.get_recap_header">get_recap_header</a></code></li>
<li><code><a title="mobilizon_reshare.publishers.abstract.AbstractEventFormatter.validate_event" href="#mobilizon_reshare.publishers.abstract.AbstractEventFormatter.validate_event">validate_event</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="mobilizon_reshare.publishers.abstract.AbstractPlatform" href="#mobilizon_reshare.publishers.abstract.AbstractPlatform">AbstractPlatform</a></code></h4>
<ul class="">
<li><code><a title="mobilizon_reshare.publishers.abstract.AbstractPlatform.name" href="#mobilizon_reshare.publishers.abstract.AbstractPlatform.name">name</a></code></li>
<li><code><a title="mobilizon_reshare.publishers.abstract.AbstractPlatform.send" href="#mobilizon_reshare.publishers.abstract.AbstractPlatform.send">send</a></code></li>
<li><code><a title="mobilizon_reshare.publishers.abstract.AbstractPlatform.validate_credentials" href="#mobilizon_reshare.publishers.abstract.AbstractPlatform.validate_credentials">validate_credentials</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="mobilizon_reshare.publishers.abstract.BasePublication" href="#mobilizon_reshare.publishers.abstract.BasePublication">BasePublication</a></code></h4>
<ul class="">
<li><code><a title="mobilizon_reshare.publishers.abstract.BasePublication.formatter" href="#mobilizon_reshare.publishers.abstract.BasePublication.formatter">formatter</a></code></li>
<li><code><a title="mobilizon_reshare.publishers.abstract.BasePublication.publisher" href="#mobilizon_reshare.publishers.abstract.BasePublication.publisher">publisher</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="mobilizon_reshare.publishers.abstract.ConfLoaderMixin" href="#mobilizon_reshare.publishers.abstract.ConfLoaderMixin">ConfLoaderMixin</a></code></h4>
<ul class="">
<li><code><a title="mobilizon_reshare.publishers.abstract.ConfLoaderMixin.conf" href="#mobilizon_reshare.publishers.abstract.ConfLoaderMixin.conf">conf</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="mobilizon_reshare.publishers.abstract.EventPublication" href="#mobilizon_reshare.publishers.abstract.EventPublication">EventPublication</a></code></h4>
<ul class="">
<li><code><a title="mobilizon_reshare.publishers.abstract.EventPublication.event" href="#mobilizon_reshare.publishers.abstract.EventPublication.event">event</a></code></li>
<li><code><a title="mobilizon_reshare.publishers.abstract.EventPublication.from_orm" href="#mobilizon_reshare.publishers.abstract.EventPublication.from_orm">from_orm</a></code></li>
<li><code><a title="mobilizon_reshare.publishers.abstract.EventPublication.id" href="#mobilizon_reshare.publishers.abstract.EventPublication.id">id</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="mobilizon_reshare.publishers.abstract.LoggerMixin" href="#mobilizon_reshare.publishers.abstract.LoggerMixin">LoggerMixin</a></code></h4>
</li>
<li>
<h4><code><a title="mobilizon_reshare.publishers.abstract.RecapPublication" href="#mobilizon_reshare.publishers.abstract.RecapPublication">RecapPublication</a></code></h4>
<ul class="">
<li><code><a title="mobilizon_reshare.publishers.abstract.RecapPublication.events" href="#mobilizon_reshare.publishers.abstract.RecapPublication.events">events</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>